<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>人力资源管理系统</title>
</head>
<body>
<div id="home">
    <!--header-->
    <el-container style="height: 1000px; border: 15px solid rgb(255,255,255)">
        <!--顶栏-->
        <el-header>
            <el-row>
                <el-col :span="12">
                    <i class="el-icon-s-promotion">人力资源管理系统</i>
                </el-col>
                <el-col :span="12" style="text-align: right">
                    <el-dropdown @command="handleCommand">
                        <span class="el-dropdown-link">
                             <el-avatar v-model="employee" :src="employee.avatar" :size="50"></el-avatar>
                        </span>
                        <span style="font-size: 20px;">
                            {{employee.name}}
                        </span>
                        <el-dropdown-menu slot="dropdown">
                            <el-dropdown-item command="a">个人信息</el-dropdown-item>
                            <el-dropdown-item command="b">修改密码</el-dropdown-item>
                            <el-dropdown-item command="c">退出登录</el-dropdown-item>
                        </el-dropdown-menu>
                    </el-dropdown>
                </el-col>
            </el-row>
        </el-header>
        <el-container style="height: 500px; border: 1px solid rgb(235,248,249)">
            <!--侧边栏-->
            <el-aside width="200px" style="background-color: rgb(255,255,255)">
                <el-menu :default-openeds="['0','1','2','2-3']" :default-active="activeIndex" @select="menuSelect">
                    <el-menu-item index="0"><!--@click="selectSystemHome"-->
                        <template slot="title">
                            <i class="el-icon-s-home">系统首页</i>
                        </template>
                    </el-menu-item>
                    <el-submenu index="1">
                        <template slot="title"><i class="el-icon-s-custom">人事管理</i></template>
                        <el-menu-item-group title="身份信息">
                            <el-menu-item index="1-1">个人信息</el-menu-item>
                            <el-menu-item index="1-2">薪资信息</el-menu-item>
                            <el-menu-item index="1-3">考勤记录</el-menu-item>
                            <el-menu-item index="1-4">请假记录</el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <el-submenu index="2">
                        <template slot="title"><i class="el-icon-menu">工作台</i></template>
                        <el-menu-item-group title="功能信息">
                            <el-menu-item index="2-1">请假申请</el-menu-item>
                            <el-menu-item index="2-2">离职申请</el-menu-item>
                            <el-submenu index="2-3">
                                <template slot="title">培训计划</template>
                                <el-menu-item index="2-3-1">培训信息</el-menu-item>
                                <el-menu-item index="2-3-2">培训申请</el-menu-item>
                            </el-submenu>
                        </el-menu-item-group>
                    </el-submenu>
                </el-menu>
            </el-aside>
            <!--首页-->
            <el-main v-if="pages[0] === true">
                <el-row>
                    <el-col :span="24" v-model="employee" style="background: white ;height: 50px;">
                        您好，{{employee.name}}！欢迎使用本系统
                    </el-col>
                </el-row>
                <hr>
                <el-row>
                    <el-col :span="24" v-model="announcements" style="background: white ;height: 380px;">
                        <h1>公告信息</h1>
                        <el-carousel>
                            <el-carousel-item  v-for="(announcement, index) in announcements" :key="index">
                                <h2 style="text-align: center">{{ announcement.title }}</h2>
                                <p>{{ announcement.content }}</p>
                                <p>来源：{{ announcement.writer }}</p>
                                <p>时间：{{ announcement.createTime }}</p>
                            </el-carousel-item>
                        </el-carousel>
                    </el-col>
                </el-row>
            </el-main>
            <!--个人信息-->
            <el-main v-if="pages[1] === true">
                <el-row>
                    <el-col :span="24">
                        <div style="background: white ;height: 650px;width: 650px">
                            <el-form ref="form" :model="info" label-width="80px" :rules="rules"
                                     style="color: black; font-weight: bold;">
                                <!--头像-->
                                <el-form-item>
                                    <el-upload
                                            class="avatar-uploader"
                                            action="http://localhost:8080/resource_app/employee/uploadAvatar"
                                            :show-file-list="false"
                                            :on-success="handleAvatarSuccess"
                                            :before-upload="beforeAvatarUpload">
                                        <img :src="info.avatar" alt="Avatar Preview" style="width: 110px; height: 110px;"/>
                                    </el-upload>
                                </el-form-item>
                                <el-form-item label="用户名:" prop="username">
                                    <el-input v-model="info.username" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="姓名:">
                                    <el-input :disabled="true" v-model="info.name" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="性别:" prop="gender">
                                    <el-input v-model="info.gender" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="电话:" prop="phone">
                                    <el-input v-model="info.phone" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="邮箱:" prop="email">
                                    <el-input v-model="info.email" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="部门:">
                                    <el-input :disabled="true" v-model="info.department"
                                              style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="身份:">
                                    <el-input :disabled="true" v-model="info.role" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item>
                                    <el-button type="primary" @click="polishInfo">保存信息</el-button>
                                </el-form-item>
                            </el-form>
                        </div>
                    </el-col>
                </el-row>
            </el-main>
            <!--薪资信息-->
            <el-main v-if="pages[2] === true">
                <el-row>
                    <el-col :span="24" v-model="employee" style="background: white ;height: 50px;">
                        <div class="block">
                            <span class="demonstration">日期:</span>
                            <el-date-picker
                                    v-model="pageBean.dateValue"
                                    type="month"
                                    value-format="yyyy-MM"
                                    placeholder="选择日期">
                            </el-date-picker>
                            <el-button type="primary" @click="showSalary">查找</el-button>
                        </div>
                    </el-col>
                </el-row>
                <hr>
                <!--薪资表单-->
                <el-row>
                    <el-col :span="24" style="background: white ;height: 600px;">
                        <template>
                            <el-table
                                    :data="salary"
                                    style="width: 100%">
                                <el-table-column
                                        label="序号"
                                        type="index"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="员工姓名"
                                        prop="name"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="所属部门"
                                        prop="department"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="发放日期"
                                        prop="sendDate"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="底薪"
                                        prop="baseSalary"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="满勤"
                                        prop="attendanceBonus"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="业绩"
                                        prop="performancePay"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="发放薪资"
                                        prop="money"
                                        align="center">
                                </el-table-column>
                            </el-table>
                        </template>
                        <!--分页条-->
                        <el-pagination
                                background
                                layout="total,prev, pager, next"
                                :page-size="10"
                                :current-page="pageBean.currentPage"
                                @current-change="handleCurrentChange1"
                                :total="tollCount">
                        </el-pagination>
                    </el-col>
                </el-row>
            </el-main>
            <!--考勤信息-->
            <el-main v-if="pages[3] === true">
                <el-row>
                    <el-col :span="24" v-model="employee" style="background: white ;height: 50px;">
                        <template>
                            <span class="demonstration">类型:</span>
                            <el-select v-model="attendanceValues" multiple placeholder="请选择类型"
                                       style="width: 250px">
                                <el-option
                                        v-for="index in attendanceOptions"
                                        :key="index.value"
                                        :label="index.label"
                                        :value="index.value">
                                </el-option>
                            </el-select>
                            <el-button type="primary" @click="showAttendance">查找</el-button>
                        </template>
                    </el-col>
                </el-row>
                <hr>
                <!--考勤表单-->
                <el-row>
                    <el-col :span="24" style="background: white ;height: 600px;">
                        <template>
                            <el-table
                                    :data="attendance"
                                    style="width: 100%">
                                <el-table-column
                                        label="序号"
                                        type="index"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="员工姓名"
                                        prop="name"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="日期"
                                        prop="date"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="考勤记录"
                                        prop="absenceRecord"
                                        align="center">
                                </el-table-column>
                            </el-table>
                        </template>
                        <!--分页条-->
                        <el-pagination
                                background
                                layout="total,prev, pager, next"
                                :page-size="10"
                                :current-page="pageBean.currentPage"
                                @current-change="handleCurrentChange2"
                                :total="tollCount">
                        </el-pagination>
                    </el-col>
                </el-row>
            </el-main>
            <!--请假信息-->
            <el-main v-if="pages[4] === true">
                <el-row>
                    <el-col :span="24" style="background: white ;height: 50px;">
                        <el-form :inline="true" :model="pageBean" class="demo-form-inline">
                            <span>请假原因:</span>
                            <el-form-item>
                                <el-input v-model="reason" clearable placeholder="请输入请假原因"></el-input>
                            </el-form-item>
                            <el-form-item>
                                <span>日期:</span>
                                <el-date-picker
                                        v-model="pageBean.dateValue"
                                        type="month"
                                        value-format="yyyy-MM"
                                        placeholder="请输入日期">
                                </el-date-picker>
                            </el-form-item>
                            <el-form-item>
                                <el-button type="primary" @click="showLeave">查找</el-button>
                            </el-form-item>
                        </el-form>
                    </el-col>
                </el-row>
                <hr>
                <!--请假表单-->
                <el-row>
                    <el-col :span="24" v-model="pageBean" style="background: white ;height: 600px;">
                        <template>
                            <el-table
                                    :data="leave"
                                    style="width: 100%">
                                <el-table-column
                                        label="序号"
                                        type="index"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="员工姓名"
                                        prop="name"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="请假类型"
                                        prop="leaveType"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="请假原因"
                                        prop="reason"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="请假开始时间"
                                        prop="startDate"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="请假结束时间"
                                        prop="endDate"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="审核状态"
                                        prop="leaveStatus"
                                        align="center">
                                </el-table-column>
                            </el-table>
                        </template>
                        <!--分页条-->
                        <el-pagination
                                background
                                layout="total,prev, pager, next"
                                :page-size="10"
                                :current-page="pageBean.currentPage"
                                @current-change="handleCurrentChange2"
                                :total="tollCount">
                        </el-pagination>
                    </el-col>
                </el-row>
            </el-main>
            <!--请假申请-->
            <el-main v-if="pages[5] === true">
                <el-row>
                    <el-col :span="24" style="background: white ;height: 50px;">
                        <el-row>
                            <el-col :span="24" style="background: white ;height: 50px">
                                <el-form :inline="true" :model="pageBean" class="demo-form-inline">
                                    <span>请假原因:</span>
                                    <el-form-item>
                                        <el-input v-model="reason" clearable placeholder="请输入请假原因"></el-input>
                                    </el-form-item>
                                    <el-form-item>
                                        <span>日期:</span>
                                        <el-date-picker
                                                v-model="pageBean.dateValue"
                                                type="month"
                                                value-format="yyyy-MM"
                                                placeholder="请输入日期">
                                        </el-date-picker>
                                    </el-form-item>
                                    <el-form-item>
                                        <el-button type="primary" @click="showUnLeave">查 找</el-button>
                                    </el-form-item>
                                </el-form>
                            </el-col>
                        </el-row>
                    </el-col>
                </el-row>
                <hr>
                <!--请假未处理表单-->
                <el-row>
                    <el-col :span="24" style="background: white ;height: 600px;">
                        <template>
                            <el-table
                                    :data="leave"
                                    style="width: 100%">
                                <el-table-column
                                        prop="id"
                                        v-if="false">
                                </el-table-column>
                                <el-table-column
                                        label="序号"
                                        type="index"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="员工姓名"
                                        prop="name"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="请假类型"
                                        prop="leaveType"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="请假原因"
                                        prop="reason"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="请假开始时间"
                                        prop="startDate"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="请假结束时间"
                                        prop="endDate"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="审核状态"
                                        prop="leaveStatus"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="操作"
                                        align="center">
                                    <!--修改(当前数据id)、单个删除-->
                                    <el-row slot-scope="scope">
                                        <el-button type="primary" plain @click="deleteLeave(scope.row)">撤销申请
                                        </el-button>
                                    </el-row>
                                </el-table-column>
                            </el-table>
                        </template>
                        <!--分页条-->
                        <el-pagination
                                background
                                layout="total,prev, pager, next"
                                :page-size="10"
                                :current-page="pageBean.currentPage"
                                @current-change="handleCurrentChange2"
                                :total="tollCount">
                        </el-pagination>
                    </el-col>
                </el-row>
                <hr>
                <!--请假申请功能-->
                <el-row>
                    <el-col :span="24" style="background: white ;height: 50px;">
                        <el-row>
                            <el-col :span="24" style="background: white ;height: 50px">
                                <span>请假申请:</span>
                                <el-button type="primary" @click="dialogFormVisible = true">申 请 表</el-button>
                            </el-col>
                        </el-row>
                    </el-col>
                    <!--对话框dialog-->
                    <el-dialog title="请假申请" :visible.sync="dialogFormVisible">
                        <el-form :model="leaveTable">
                            <el-form-item label="请假类型" :label-width="formLabelWidth">
                                <el-select v-model="leaveTable.leaveType" placeholder="请选择请假类型">
                                    <el-option label="事假" value="事假"></el-option>
                                    <el-option label="病假" value="病假"></el-option>
                                </el-select>
                            </el-form-item>
                            <el-form-item label="请假时间" :label-width="formLabelWidth">
                                <el-date-picker type="date" placeholder="开始日期" v-model="leaveTable.startDate"
                                                style="width: 215px"></el-date-picker>
                                <span>--</span>
                                <el-date-picker type="date" placeholder="结束日期" v-model="leaveTable.endDate"
                                                style="width: 215px"></el-date-picker>
                            </el-form-item>
                            <el-form-item label="请假原因" :label-width="formLabelWidth">
                                <el-input type="textarea" v-model="leaveTable.reason" clearable
                                          autocomplete="off"></el-input>
                            </el-form-item>
                        </el-form>
                        <div slot="footer" class="dialog-footer">
                            <el-button @click="dialogFormVisible = false">取 消</el-button>
                            <el-button type="primary" @click="addLeave">确 定</el-button>
                        </div>
                    </el-dialog>
                </el-row>
            </el-main>
            <!--离职申请-->
            <el-main v-if="pages[6] === true">
                <el-row>
                    <el-col :span="24" style="background: white ;height: 50px;">
                        <el-row>
                            <el-input placeholder="请输入离职原因" v-model="reason2" clearable
                                      style="width: 250px;"></el-input>
                            <el-button type="primary" @click="showQuit">查 找</el-button>
                        </el-row>
                    </el-col>
                </el-row>
                <hr>
                <!--离职申请功能-->
                <el-row>
                    <el-col :span="24" style="background: white ;height: 50px;">
                        <el-row>
                            <el-col :span="24" style="background: white ;height: 50px">
                                <el-button type="primary" plain @click="dialogFormVisible1 = true;">离职申请</el-button>
                                <el-button type="danger" plain @click="deleteQuit">撤销申请</el-button>
                            </el-col>
                        </el-row>
                    </el-col>
                    <!--对话框dialog-->
                    <el-dialog title="离职申请" :visible.sync="dialogFormVisible1">
                        <el-form :model="quit">
                            <el-form-item label="离职原因" :label-width="formLabelWidth">
                                <el-input type="textarea" v-model="quit.quitReason" clearable
                                          autocomplete="off"></el-input>
                            </el-form-item>
                        </el-form>
                        <div slot="footer" class="dialog-footer">
                            <el-button @click="dialogFormVisible1 = false">取 消</el-button>
                            <el-button type="primary" @click="addQuit">确 定</el-button>
                        </div>
                    </el-dialog>
                </el-row>
                <hr>
                <!--离职信息表单-->
                <el-row>
                    <el-col :span="24" v-model="pageBean" style="background: white ;height: 600px;">
                        <template>
                            <el-table
                                    :data="quitValue"
                                    style="width: 100%"
                                    @selection-change="handleSelectionChange">
                                <el-table-column
                                        type="selection"
                                        width="55">
                                </el-table-column>
                                <el-table-column
                                        prop="id"
                                        v-if="false">
                                </el-table-column>
                                <el-table-column
                                        label="姓名"
                                        prop="name"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="部门"
                                        prop="department"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="身份"
                                        prop="role"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="离职原因"
                                        prop="quitReason"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="审核"
                                        prop="quitStatus"
                                        align="center">
                                </el-table-column>
                            </el-table>
                        </template>
                        <!--分页条-->
                        <el-pagination
                                background
                                layout="total,prev, pager, next"
                                :page-size="10"
                                :current-page="pageBean.currentPage"
                                @current-change="handleCurrentChange3"
                                :total="tollCount">
                        </el-pagination>
                    </el-col>
                </el-row>
            </el-main>
            <!--培训信息-->
            <el-main v-if="pages[7] === true">
                <el-row>
                    <el-col :span="24" style="background: white ;height: 50px;">
                        <el-row>
                            <el-input placeholder="请输入培训名称" v-model="trainName" clearable
                                      style="width: 250px;"></el-input>
                            <el-button type="primary" @click="showTrain">查 找</el-button>
                        </el-row>
                    </el-col>
                </el-row>
                <hr>
                <!--培训表单-->
                <el-row>
                    <el-col :span="24" v-model="pageBean" style="background: white ;height: 600px;">
                        <template>
                            <el-table
                                    :data="trainValue"
                                    style="width: 100%">
                                <el-table-column
                                        label="姓名"
                                        prop="name"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="培训名称"
                                        prop="trainName"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="培训地点"
                                        prop="trainLocation"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="开始日期"
                                        prop="startDate"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="结束日期"
                                        prop="endDate"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="培训时长(天)"
                                        prop="trainTime"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="培训成绩"
                                        prop="score"
                                        align="center">
                                </el-table-column>
                            </el-table>
                        </template>
                        <!--分页条-->
                        <el-pagination
                                background
                                layout="total,prev, pager, next"
                                :page-size="10"
                                :current-page="pageBean.currentPage"
                                @current-change="handleCurrentChange4"
                                :total="tollCount">
                        </el-pagination>
                    </el-col>
                </el-row>
            </el-main>
            <!--参加培训-->
            <el-main v-if="pages[8] === true">
                <el-row>
                    <el-col :span="24" style="background: white ;height: 50px;">
                        <el-row>
                            <el-input placeholder="请输入培训名称" v-model="trainNames" clearable
                                      style="width: 250px;"></el-input>
                            <el-button type="primary" @click="showTrains">查 找</el-button>
                        </el-row>
                    </el-col>
                </el-row>
                <hr>
                <!--培训表单-->
                <el-row>
                    <el-col :span="24" v-model="pageBean" style="background: white ;height: 600px;">
                        <template>
                            <el-table
                                    :data="trains"
                                    style="width: 100%">
                                <el-table-column
                                        prop="id"
                                        v-if="false">
                                </el-table-column>
                                <el-table-column
                                        label="培训名称"
                                        prop="trainName"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="培训地点"
                                        prop="trainLocation"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="培训描述"
                                        prop="description"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="开始日期"
                                        prop="startDate"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="结束日期"
                                        prop="endDate"
                                        align="center">
                                </el-table-column>
                                <el-table-column
                                        label="操作"
                                        align="center">
                                    <!--修改(当前数据id)、单个删除-->
                                    <el-row slot-scope="scope">
                                        <el-button type="primary" plain @click="judgeTrain(scope.row)">参加
                                        </el-button>
                                    </el-row>
                                </el-table-column>
                            </el-table>
                        </template>
                        <!--分页条-->
                        <el-pagination
                                background
                                layout="total,prev, pager, next"
                                :page-size="10"
                                :current-page="pageBean.currentPage"
                                @current-change="handleCurrentChange5"
                                :total="tollCount">
                        </el-pagination>
                    </el-col>
                </el-row>
            </el-main>
            <!--修改密码-->
            <el-main v-if="pages[9] === true">
                <el-row>
                    <el-col :span="24" style="background: white ;height: 250px; width: 500px">
                        <el-row>
                            <el-form :model="ruleForm" status-icon :rules="passwordRules" ref="ruleForm" label-width="100px" class="demo-ruleForm">
                                <el-form-item label="密码" prop="pass">
                                    <el-input type="password" v-model="ruleForm.pass" autocomplete="off"></el-input>
                                </el-form-item>
                                <el-form-item label="确认密码" prop="checkPass">
                                    <el-input type="password" v-model="ruleForm.checkPass" autocomplete="off"></el-input>
                                </el-form-item>
                                <el-form-item>
                                    <el-button type="primary" @click="submitForm('ruleForm')">提交</el-button>
                                    <el-button @click="resetForm('ruleForm')">重置</el-button>
                                </el-form-item>
                            </el-form>
                        </el-row>
                    </el-col>
                </el-row>
            </el-main>
        </el-container>
    </el-container>
</div>
</body>

<!--导包-->
<script src="js/vue.js"></script>
<script src="js/axios-0.18.0.js"></script>
<script src="element-ui/lib/index.js"></script>
<link rel="stylesheet" href="element-ui/lib/theme-chalk/index.css">

<!--Vue-->
<script>
    new Vue({
        el: '#home',
        data() {
            //密码校验
            const validatePass = (rule, value, callback) => {
                if (value === '') {
                    callback(new Error('请输入密码'));
                } else {
                    if (this.ruleForm.checkPass !== '') {
                        this.$refs.ruleForm.validateField('checkPass');
                    }
                    callback();
                }
            };
            const validatePass2 = (rule, value, callback) => {
                if (value === '') {
                    callback(new Error('请再次输入密码'));
                } else if (value !== this.ruleForm.pass) {
                    callback(new Error('两次输入密码不一致!'));
                } else {
                    callback();
                }
            };
            return {
                //员工数据
                employee: {
                    id: '',
                    username: '',
                    password: '',
                    name: '',
                    avatar: '',
                    gender: '',
                    role: '',
                    phone: '',
                    email: '',
                    department: '',
                },
                //员工信息
                info: {
                    id: '',
                    username: '',
                    password: '',
                    name: '',
                    avatar: '',
                    gender: '',
                    role: '',
                    phone: '',
                    email: '',
                    department: '',
                },
                //请假表
                leaveTable: {
                    employeeId: '',
                    name: '',
                    leaveType: '',
                    reason: '',
                    startDate: '',
                    endDate: '',
                },
                //离职表
                quit: {
                    employeeId: '',
                    name: '',
                    department: '',
                    quitReason: '',
                    quitStatus: '',
                },
                //培训表
                train: {
                    employeeId: '',
                    name: '',
                    trainId: '',
                    score: '',
                },
                //离职信息
                quitValue: [],
                //薪资信息
                salary: [],
                //考勤信息
                attendance: [],
                //考勤类型值数组
                attendanceValues: [], //初始全部查询
                //请假数据、原因
                leave: [],
                reason: '', // 请假原因
                reason2: '',//离职原因
                //培训数据
                trainValue: [],
                trainName: '',
                //参加培训
                trains: [],
                trainNames: '',
                //多选框主键
                checkBox: [],
                multipleSelection: [],
                //公告数据
                announcements:[],
                //默认选项
                activeIndex: '0',
                //表单数据验证
                rules: {
                    username: [
                        {required: true, message: '用户名不能为空', trigger: 'blur'},
                        {max: 10, message: '不能超过10个字符', trigger: 'blur'}
                    ],
                    phone: [
                        {required: true, message: '电话不能为空', trigger: 'blur'},
                        {min: 11, max: 11, message: '长度为11个数字', trigger: 'blur'}
                    ],
                    email: [
                        {required: true, message: '邮箱不能为空', trigger: 'blur'}
                    ],
                    gender: [
                        {required: true, message: '性别不能为空', trigger: 'blur'},
                        {min: 1, max: 1, message: '男 或 女', trigger: 'blur'}]
                },
                //pageBean
                pageBean: {
                    dateValue: '',//日期值
                    currentPage: '1', //当前页码
                },
                //总条目数
                tollCount: '',
                //判断flag
                flag: '',
                //考勤选择器
                attendanceOptions: [{
                    value: '迟到',
                    label: '迟到'
                }, {
                    value: '早退',
                    label: '早退'
                }, {
                    value: '缺勤',
                    label: '缺勤'
                }],
                //密码修改
                ruleForm: {
                    pass: '',
                    checkPass: '',
                },
                passwordRules: {
                    pass: [
                        { validator: validatePass, trigger: 'blur' }
                    ],
                    checkPass: [
                        { validator: validatePass2, trigger: 'blur' }
                    ],
                },
                dialogFormVisible: false,  //请假dialog
                dialogFormVisible1: false, //离职dialog
                formLabelWidth: '120px',
                //不同页面展示
                pages: [false, false, false, false, false, false, false, false, false,false],
            }
        },
        //(生命周期函数)页面加载完成,发送异步请求,获取初始数据
        mounted() {
            this.showMessage(); // 登录成功提示
            this.selectSystemHome(); //刷新页面执行
            this.showAnnouncement(); //公告内容
        },
        methods: {
            //登录成功信息展示
            showMessage() {
                // 读取本地存储中的登录成功的信息
                const loginSuccess = localStorage.getItem('loginSuccess');
                if (loginSuccess === 'true') {
                    //消息
                    this.$message({
                        message: '登录成功',
                        type: 'success'
                    });
                    // 清除本地存储中的登录成功的信息
                    localStorage.removeItem('loginSuccess');
                }
            },
            //展示公告信息
            showAnnouncement(){
                axios({
                    method: "get",
                    url: "http://localhost:8080/resource_app/employee/showAnnouncement",
                }).then((resp) => {
                    this.announcements = resp.data;
                })
            },
            //菜单选项功能分发
            menuSelect(key, keyPath) {
                //key:选项索引，keyPath:索引路径数组
                switch (key) {
                    case '0':
                        this.selectSystemHome();
                        this.showAnnouncement();
                        break;
                    case '1-1':
                        this.showInfo();
                        break;
                    case '1-2':
                        this.showSalary();
                        break;
                    case '1-3':
                        this.showAttendance();
                        break;
                    case '1-4':
                        this.showLeave();
                        break;
                    case '2-1':
                        this.showUnLeave();
                        break;
                    case '2-2':
                        this.showQuit();
                        break;
                    case '2-3-1':
                        this.showTrain();
                        break;
                    case '2-3-2':
                        this.showTrains();
                        break;
                    default:
                        window.alert("keyPath:" + keyPath);
                }
            },
            //页面展示函数
            showPages(index) {
                for (let i = 0; i < this.pages.length; i++) {
                    this.pages[i] = i === index;
                }
            },
            //根据员工id查找
            idSelect(id) {
                axios({
                    method: "get",
                    url: "http://localhost:8080/resource_app/employee/idSelect?employeeId=" + id,
                }).then((resp) => {
                    this.employee = resp.data;
                    this.ruleForm.pass = this.employee.password;
                })
            },
            //系统首页函数
            selectSystemHome() {
                axios({
                    method: "get",
                    url: "http://localhost:8080/resource_app/employee/firstPage",
                }).then((resp) => {
                    //首页展示
                    this.showPages(0);
                    //响应数据
                    this.employee = resp.data;
                    this.info = resp.data;
                    //密码绑定
                    this.ruleForm.pass = this.employee.password;
                })
            },
            //展示个人信息
            showInfo() {
                axios({
                    method: "get",
                    url: "http://localhost:8080/resource_app/employee/firstPage",
                }).then((resp) => {
                    //首页展示
                    this.showPages(1);
                    //响应数据
                    this.employee = resp.data;
                })
            },
            //展示薪资信息
            showSalary() {
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/showSalary?employeeId=" + this.employee.id,
                    data: this.pageBean,
                }).then((resp) => {
                    //employee的数据刷新
                    this.idSelect(this.employee.id);
                    //薪资页面展示
                    this.showPages(2);
                    //响应salary、tallCount数据
                    this.salary = resp.data.rows;
                    this.tollCount = resp.data.tollCount;
                })
            },
            //展示考勤记录
            showAttendance() {
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/showAttendance?employeeId=" + this.employee.id + "&currentPage=" + this.pageBean.currentPage,
                    data: this.attendanceValues,
                }).then((resp) => {
                    //employee的数据刷新
                    this.idSelect(this.employee.id);
                    //考勤页面展示
                    this.showPages(3);
                    //获取响应数据
                    this.attendance = resp.data.rows;
                    this.tollCount = resp.data.tollCount;
                })
            },
            //请假记录
            showLeave() {
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/showLeave?employeeId=" + this.employee.id + "&reason=" + this.reason,
                    data: this.pageBean,
                }).then((resp) => {
                    //获取请假数据、刷新employee数据、页面显示
                    this.idSelect(this.employee.id);
                    this.showPages(4);
                    this.leave = resp.data.rows;
                    this.tollCount = resp.data.tollCount;
                })
            },
            //请假申请未处理表,
            showUnLeave() {
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/showUnLeave?employeeId=" + this.employee.id + "&reason=" + this.reason,
                    data: this.pageBean,
                }).then((resp) => {
                    //获取请假数据、刷新employee数据、页面显示
                    this.idSelect(this.employee.id);
                    this.showPages(5);
                    this.leave = resp.data.rows;
                    this.tollCount = resp.data.tollCount;
                })
            },
            //离职申请数据
            showQuit() {
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/showQuit?employeeId=" + this.employee.id + "&quitReason=" + this.reason2,
                    data: this.pageBean,
                }).then((resp) => {
                    //刷新employee数据离职申请数据、页面显示
                    this.idSelect(this.employee.id);
                    this.showPages(6);
                    this.quitValue = resp.data.rows;
                    this.tollCount = resp.data.tollCount;
                })
            },
            //修改个人信息
            polishInfo() {
                this.info.id = this.employee.id;
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/polishInfo",
                    data: this.info,
                }).then((resp) => {
                    if (resp.data === 'success') {
                        this.employee = this.info;
                    }
                    else if (resp.data === "repetition") {
                        this.message0("数据出现重复", 'error');
                    }else if (resp.data === 'error'){
                        this.message0("数据格式有误",'error');
                    }else {
                        this.message0("修改程序错误",'error');
                    }
                })

            },
            //撤销请假申请
            deleteLeave(row) {
                //弹框提示，是否删除
                this.$confirm('此操作将撤销请假申请, 是否确定?', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                    axios({
                        method: "get",
                        url: "http://localhost:8080/resource_app/employee/deleteLeave?id=" + row.id, //该行数据的主键
                    }).then((resp) => {
                        if (resp.data === "success") {
                            //刷新数据,信息提示
                            this.showUnLeave();
                            this.message1();
                        } else {
                            this.message2();
                        }
                    })
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: '已取消删除'
                    });
                });
            },
            //添加请假申请
            addLeave() {
                //设置员工ID、姓名
                this.leaveTable.employeeId = this.employee.id;
                this.leaveTable.name = this.employee.name;
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/addLeave",
                    data: this.leaveTable
                }).then((resp) => {
                    if (resp.data === "success") {
                        //关闭对话框、刷新数据、成功提示
                        this.dialogFormVisible = false;
                        this.showUnLeave();
                        this.message3();
                    } else {
                        this.message4();
                    }
                })
            },
            //添加离职申请
            addQuit() {
                //设置员工ID、姓名
                this.quit.employeeId = this.employee.id;
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/addQuit",
                    data: this.quit
                }).then((resp) => {
                    if (resp.data === "success") {
                        //关闭对话框、刷新数据、成功提示
                        this.dialogFormVisible1 = false;
                        this.showQuit();
                        this.message3();
                    } else {
                        this.message4();
                    }
                })
            },
            //撤销离职申请
            deleteQuit() {
                this.$confirm('此操作将撤销离职申请, 是否继续?', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                    //获取所选框id主键
                    for (let i = 0; i < this.multipleSelection.length; i++) {
                        let quitTable = this.multipleSelection[i];
                        this.checkBox[i] = quitTable.id;
                    }
                    axios({
                        method: "post",
                        url: "http://localhost:8080/resource_app/employee/deleteQuit",
                        data: this.checkBox
                    }).then((resp) => {
                        //刷新,提示
                        if (resp.data === "success") {
                            this.showQuit();
                            this.message1();
                        } else {
                            this.message2();
                        }
                    })
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: '取消撤销'
                    });
                });
            },
            //展示参加的培训信息
            showTrain() {
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/showTrain?employeeId=" + this.employee.id + "&trainName=" + this.trainName,
                    data: this.pageBean,
                }).then((resp) => {
                    //刷新employee数据离职申请数据、页面显示
                    this.idSelect(this.employee.id);
                    this.showPages(7);
                    this.trainValue = resp.data.rows;
                    this.tollCount = resp.data.tollCount;
                })
            },
            //展示未参加培训信息
            showTrains() {
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/showTrains?trainNames=" + this.trainNames,
                    data: this.pageBean,
                }).then((resp) => {
                    //刷新employee数据离职申请数据、页面显示
                    this.idSelect(this.employee.id);
                    this.showPages(8);
                    this.trains = resp.data.rows;
                    this.tollCount = resp.data.tollCount;
                })
            },
            //参加培训
            addTrain(row) {
                //设置员工ID、姓名
                this.train.employeeId = this.employee.id;
                this.train.name = this.employee.name;
                this.train.trainId = row.id;
                this.train.score = -1;
                axios({
                    method: "post",
                    url: "http://localhost:8080/resource_app/employee/addTrain",
                    data: this.train
                }).then((resp) => {
                    if (resp.data === "success") {
                        this.message0("参加成功",'success');
                    } else {
                        this.message0("不能重复参加",'error');
                    }
                })
            },
            //判断是否可参加培训
            judgeTrain(row) {
                //弹框提示，是否删除
                this.$confirm('是否参加此培训', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                    axios({
                        method: "get",
                        url: "http://localhost:8080/resource_app/employee/judgeTrain?employeeId=" + this.employee.id + "&trainId=" + row.id,
                    }).then((resp) => {
                        //是否参加
                        if (resp.data === "success") {
                            //添加培训
                            this.addTrain(row);
                        } else {
                            this.message0("不能重复参加",'error');
                        }
                    })
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: '已取消申请'
                    });
                });
            },
            //修改密码
            polishPassword() {
                axios({
                    method: "get",
                    url: "http://localhost:8080/resource_app/employee/polishPassword?employeeId="+this.employee.id+"&newPassword="+this.ruleForm.checkPass,
                }).then((resp) => {
                    if (resp.data === "success"){
                        //修改成功
                        this.message5()
                    }
                    else{
                        this.message6();
                    }
                })
            },
            //下拉菜单
            handleCommand(command) {
                switch (command){
                    case 'a':
                        this.showInfo();
                        break;
                    case 'b':
                        this.idSelect(this.employee.id);
                        this.showPages(9);
                        break;
                    case 'c':
                        //退出登录
                        this.logout();
                        break;
                    default:
                        alert("错误!");
                }
            },
            //退出登录
            logout(){
                axios({
                    method:"get",
                    url:"http://localhost:8080/resource_app/employee/logout"
                }).then((resp) => {
                    if (resp.data ==="success"){
                        window.location.href = "http://localhost:8080/resource_app/login.html";
                    }
                })
            },
            //头像上传
            handleAvatarSuccess(res, file) {
                this.info.avatar = URL.createObjectURL(file.raw).toString();
            },
            beforeAvatarUpload(file) {
                const isJPG = file.type === 'image/jpeg';
                const isLt2M = file.size / 1024 / 1024 < 2;
                if (!isJPG) {
                    this.$message.error('上传头像图片只能是 JPG 格式!');
                }
                if (!isLt2M) {
                    this.$message.error('上传头像图片大小不能超过 2MB!');
                }
                return isJPG && isLt2M;
            },
            //密码修改表单确认
            submitForm(formName) {
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        //成功提交,异步请求
                        this.polishPassword();
                    } else {
                        this.message6();
                        return false;
                    }
                });
            },
            //重置密码表单数据
            resetForm(formName) {
                this.$refs[formName].resetFields();
            },
            //当前页查询;
            handleCurrentChange1(val) {
                this.pageBean.currentPage = val;//重新设置当前页码
                this.showSalary();
            },
            handleCurrentChange2(val) {
                this.pageBean.currentPage = val;//重新设置当前页码
                this.showAttendance();
            },
            handleCurrentChange3(val) {
                this.pageBean.currentPage = val;//重新设置当前页码
                //查找,重置页数
                this.showQuit();
            },
            handleCurrentChange4(val) {
                this.pageBean.currentPage = val;//重新设置当前页码
                this.showTrain();
            },
            handleCurrentChange5(val) {
                this.pageBean.currentPage = val;//重新设置当前页码
                //查找,重置页数
                this.showTrains();
            },
            //多选框数据
            handleSelectionChange(val) {
                this.multipleSelection = val;
            },
            //消息提示
            message0(message, type) {
                this.$message({
                    showClose: true,
                    message: message,
                    type: type,
                });
            },
            message1() {
                this.$message({
                    showClose: true,
                    message: '撤销成功',
                    type: 'success'
                });
            },
            message2() {
                this.$message({
                    showClose: true,
                    message: '撤销失败',
                    type: 'error'
                });
            },
            message3() {
                this.$message({
                    showClose: true,
                    message: '申请成功',
                    type: 'success'
                });
            },
            message5() {
                this.$message({
                    showClose: true,
                    message: '修改成功',
                    type: 'success'
                });
            },
            message6() {
                this.$message({
                    showClose: true,
                    message: '修改失败',
                    type: 'error'
                });
            },
        }
    })
</script>

<style>
    .el-header {
        background-color: rgba(58, 227, 224, 0.76);
        font-size: 20px;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        border-radius: 5px;
    }

    .el-main {
        background-color: #eee;
        text-align: left;
        line-height: 50px;
    }

    .el-carousel__item h3 {
        color: #475669;
        font-size: 18px;
        opacity: 0.75;
        line-height: 300px;
        margin: 0;
    }

    .el-carousel__item:nth-child(2n) {
        background-color: #99a9bf;
    }

    .el-carousel__item:nth-child(2n+1) {
        background-color: rgb(204, 230, 200);
    }

    .avatar-uploader .el-upload {
        border: 1px dashed #d9d9d9;
        border-radius: 5px;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .avatar-uploader .el-upload:hover {
        border-color: #409EFF;
    }
</style>


</html>


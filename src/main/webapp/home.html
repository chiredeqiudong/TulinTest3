<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>人力资源管理系统</title>
</head>
<style>
    .el-header {
        background-color: rgba(58, 227, 224, 0.76);
        font-size: 20px;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        border-radius: 5px;
    }

    .el-main {
        background-color: #eee;
        text-align: left;
        line-height: 50px;
    }

    .el-carousel__item h3 {
        color: #475669;
        font-size: 18px;
        opacity: 0.75;
        line-height: 300px;
        margin: 0;
    }

    .el-carousel__item:nth-child(2n) {
        background-color: #99a9bf;
    }

    .el-carousel__item:nth-child(2n+1) {
        background-color: rgb(204, 230, 200);
    }
</style>
<body>
<div id="home">
    <!--header-->
    <el-container style="height: 1000px; border: 15px solid rgb(255,255,255)">
        <!--顶栏-->
        <el-header>
            <el-row>
                <el-col :span="8">
                    <i class="el-icon-s-promotion">人力资源管理系统</i>
                </el-col>
                <el-col :span="8">
                    <div class="grid-content bg-purple">
                        <el-breadcrumb separator-class="el-icon-arrow-right" style="font-size: 18px;">
                            <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>
                            <el-breadcrumb-item>系统首页</el-breadcrumb-item>
                            <el-breadcrumb-item>活动列表</el-breadcrumb-item>
                            <el-breadcrumb-item>活动详情</el-breadcrumb-item>
                        </el-breadcrumb>
                    </div>
                </el-col>
                <el-col :span="8" style="text-align: right">
                    <el-dropdown>
                        <span class="el-dropdown-link" v-model="employee">
                             <el-avatar :src="employee.avatar" :size="large">
                             </el-avatar>
                        </span>
                        <span style="font-size: 20px;text-align: center">
                            {{employee.name}}
                        </span>
                        <el-dropdown-menu slot="dropdown">
                            <el-dropdown-item>个人信息</el-dropdown-item>
                            <el-dropdown-item>修改密码</el-dropdown-item>
                            <el-dropdown-item>退出登录</el-dropdown-item>
                        </el-dropdown-menu>
                    </el-dropdown>
                </el-col>
            </el-row>
        </el-header>
        <el-container style="height: 500px; border: 1px solid rgb(235,248,249)">
            <!--侧边栏-->
            <el-aside width="200px" style="background-color: rgb(255,255,255)">
                <el-menu :default-openeds="['0','1','2','2-3']" :default-active="activeIndex" @select="menuSelect">
                    <el-menu-item index="0"><!--@click="selectSystemHome"-->
                        <template slot="title">
                            <i class="el-icon-s-home">系统首页</i>
                        </template>
                    </el-menu-item>
                    <el-submenu index="1">
                        <template slot="title"><i class="el-icon-s-custom">人事管理</i></template>
                        <el-menu-item-group title="身份信息">
                            <el-menu-item index="1-1">个人信息</el-menu-item>
                            <el-menu-item index="1-2">薪资信息</el-menu-item>
                            <el-menu-item index="1-3">考勤记录</el-menu-item>
                            <el-menu-item index="1-4">请假记录</el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <el-submenu index="2">
                        <template slot="title"><i class="el-icon-menu">工作台</i></template>
                        <el-menu-item-group title="功能信息">
                            <el-menu-item index="2-1">请假申请</el-menu-item>
                            <el-menu-item index="2-2">离职申请</el-menu-item>
                            <el-submenu index="2-3">
                                <template slot="title">培训计划</template>
                                <el-menu-item index="2-3-1">培训信息</el-menu-item>
                                <el-menu-item index="2-3-2">成绩查询</el-menu-item>
                            </el-submenu>
                        </el-menu-item-group>
                    </el-submenu>
                </el-menu>
            </el-aside>
            <!--首页-->
            <el-main v-if="pages[0] === true">
                <el-row>
                    <el-col :span="24">
                        <div style="background: white ;height: 50px;" v-model="employee">
                            您好，{{employee.name}}！欢迎使用本系统
                        </div>
                    </el-col>
                </el-row>
                <tr>
                    <el-row>
                        <el-col :span="24">
                            <div style="background: white ;height: 350px;" v-model="employee">
                                <h1 style="text-align: center">公告信息</h1>
                                <el-carousel>
                                    <el-carousel-item v-for="item in 5" :key="item">
                                        <p>
                                            2023年12月31日,放假!2023年12月31日,放假！2023年12月31日,放假！2023年12月31日,放假！
                                        </p>
                                    </el-carousel-item>
                                </el-carousel>
                            </div>
                        </el-col>
                    </el-row>
            </el-main>
            <!--个人信息-->
            <el-main v-if="pages[1] === true">
                <el-row>
                    <el-col :span="24">
                        <div style="background: white ;height: 600px;width: 650px" v-model="employee">
                            <el-form ref="form" :model="employee" label-width="80px" :rules="rules"
                                     style="color: black; font-weight: bold;">
                                <!--头像-->
                                <el-form-item label="用户名:">
                                    <el-input :disabled="true" v-model="employee.username" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="姓名:" prop="name">
                                    <el-input v-model="employee.name" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="电话:" prop="phone">
                                    <el-input v-model="employee.phone" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="邮箱:" prop="email">
                                    <el-input v-model="employee.email" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="部门:">
                                    <el-input :disabled="true" v-model="employee.level" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item label="身份:">
                                    <el-input :disabled="true" v-model="employee.role" style="width: 300px;"></el-input>
                                </el-form-item>
                                <el-form-item>
                                    <el-button type="primary" @click="PolishInfo">保存信息</el-button>
                                </el-form-item>
                            </el-form>
                        </div>
                    </el-col>
                </el-row>
            </el-main>
        </el-container>
    </el-container>

</div>
</body>

<!--导包-->
<script src="js/vue.js"></script>
<script src="js/axios-0.18.0.js"></script>
<script src="element-ui/lib/index.js"></script>
<link rel="stylesheet" href="element-ui/lib/theme-chalk/index.css">

<!--Vue-->
<script>
    new Vue({
        el: "#home",
        data() {
            return {
                //员工数据
                employee: {
                    id: '',
                    username: '',
                    password: '',
                    name: '',
                    avatar: '',
                    gender: '',
                    role: '',
                    phone: '',
                    email: '',
                    level: '',
                },
                //默认选项
                activeIndex: '0',
                //不同页面展示
                pages: [false, false, false, false, false, false, false, false, false],
                //表单数据验证
                rules: {
                    name: [
                        {required: true, message: '姓名不能为空', trigger: 'blur'},
                        {min: 2, message: '至少 2 个字符', trigger: 'blur'}
                    ],
                    phone: [
                        {required: true, message: '电话不能为空', trigger: 'blur'},
                        {min: 11, max: 11, message: '长度为11个数字', trigger: 'blur'}
                    ],
                    email: [
                        {required: true, message: '邮箱不能为空', trigger: 'blur'}
                    ],
                },
            }
        },
        //(生命周期函数)页面加载完成,发送异步请求,获取初始数据
        mounted() {
            this.showMessage(); // 登录成功提示
            this.selectSystemHome(); //刷新页面执行
        },
        methods: {
            //登录成功信息展示
            showMessage() {
                // 读取本地存储中的登录成功的信息
                const loginSuccess = localStorage.getItem('loginSuccess');
                if (loginSuccess === 'true') {
                    //消息
                    this.$message({
                        message: '登录成功',
                        type: 'success'
                    });
                    // 清除本地存储中的登录成功的信息
                    localStorage.removeItem('loginSuccess');
                }
            },
            //菜单选项功能分发
            menuSelect(key, keyPath) {
                //key:选项索引，keyPath:索引路径数组
                switch (key) {
                    case '0':
                        this.selectSystemHome();
                        break;
                    case '1-1':
                        this.showInfo();
                        break;
                    default:
                        window.alert("keyPath:" + keyPath);
                }
            },
            //页面展示函数
            showPages(index) {
                for (let i = 0; i < this.pages.length; i++) {
                    this.pages[i] = i === index;
                }
            },
            //系统首页函数
            selectSystemHome() {
                axios({
                    method: "get",
                    url: "http://localhost:8080/resource_app/employee/firstPage",
                }).then((resp) => {
                    //首页展示
                    this.showPages(0);
                    //响应数据
                    this.employee = resp.data;
                    //公告数据
                })
            },
            //展示个人信息
            showInfo() {
                axios({
                    method: "get",
                    url: "http://localhost:8080/resource_app/employee/firstPage",
                }).then((resp) => {
                    //首页展示
                    this.showPages(1);
                    //响应数据
                    this.employee = resp.data;
                })
            },
            //修改个人信息
            PolishInfo() {


            }

        }
    })
</script>

</html>

